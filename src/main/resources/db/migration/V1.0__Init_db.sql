CREATE SEQUENCE PWS_SEQUENCE START WITH 100;

CREATE TABLE PLAYER(
    TAG VARCHAR(255) NOT NULL,
    AVG_CARD_DONATION REAL NOT NULL,
    AVG_CHEST_CONTRIBUTION REAL NOT NULL,
    NAME VARCHAR(255),
    ROLE VARCHAR(255)
);
ALTER TABLE PLAYER ADD CONSTRAINT PLAYER_PK_CONSTRAINT PRIMARY KEY(TAG);

CREATE TABLE PLAYER_WEEKLY_STATS(
    ID BIGINT DEFAULT NEXTVAL('PWS_SEQUENCE') NOT NULL,
    CARD_DONATION SMALLINT NOT NULL,
    CHEST_CONTRIBUTION SMALLINT NOT NULL,
    WEEK SMALLINT NOT NULL,
    PLAYERFK VARCHAR(255)
);

ALTER TABLE PLAYER_WEEKLY_STATS ADD CONSTRAINT PWS_UNIQUE_1 UNIQUE(PLAYERFK, WEEK);
ALTER TABLE PLAYER_WEEKLY_STATS ADD CONSTRAINT PWS_PLAYER_FK FOREIGN KEY(PLAYERFK) REFERENCES PLAYER(TAG);
ALTER TABLE PLAYER_WEEKLY_STATS ADD CONSTRAINT PWS_PK PRIMARY KEY(ID);

/*
INSERT INTO PUBLIC.PLAYER(TAG, AVG_CARD_DONATION, AVG_CHEST_CONTRIBUTION, NAME, ROLE) VALUES
('2L9QC022', 0.0, 0.0, 'Siou10', 'Member'),
('8CG02J0J', 0.0, 0.0, 'PsHyCo G21', 'Member'),
('8UVR0CV0', 0.0, 0.0, E'\u26a1\ufe0fPanayiotis\u26a1\ufe0f', 'Member'),
('2J29LCGVL', 0.0, 0.0, 'paris.z.2', 'Member'),
('2CGR8JUP0', 0.0, 0.0, E'\u03a6\u03bf\u03bd\u03b9\u03ba\u03cc\u03a1\u03b1\u03c0\u03b1\u03bd\u03ac\u03ba\u03b9\u263a', 'Member'),
('2CPLV9JUG', 0.0, 0.0, 'George master 3', 'Member'),
('8YGJU98QP', 0.0, 0.0, 'gkl', 'Member'),
('2YY8RGLC9', 226.0, 26.0, 'Vins', 'Member'),
('2RCL000UV', 16.0, 0.0, 'ronaldo', 'Member'),
('RGQUR2JU', 56.0, 8.0, 'Supercell', 'Member'),
('G99VPYPQ', 42.0, 0.0, 'IceWiZ TiTaN JR', 'Member'),
('V2R8U89U', 633.0, 110.0, 'Dark Skeleton', 'Member'),
('VVQLYP2C', 302.0, 2.0, 'Omega', 'Elder'),
('2Y8LYVLUQ', 4.0, 16.0, 'PANOS GREEK FTW', 'Member'),
('U8Y0GPGY', 146.0, 0.0, 'apo#14', 'Member'),
('8PY0RJR8G', 48.0, 39.0, 'dambo', 'Member'),
('JPRJ92CJ', 334.0, 45.0, 'skeleton party', 'Member'),
('UY9UR2Y2', 116.0, 24.0, 'barbarian king', 'Member'),
('2LCL0LQC', 72.0, 0.0, 'Panos', 'Member'),
('228RJJVQ0', 321.0, 23.0, 'panos_the_greek', 'Member'),
('RG99QUCV', 307.0, 45.0, 'TheGreek', 'Member'),
('2GVCRLP9R', 249.0, 31.0, 'George master', 'Member'),
('8YP8CLY2C', 80.0, 40.0, 'Yannis', 'Member'),
('2QP09PJ', 340.0, 18.0, 'aggelos', 'Member'),
('29JYRL8LR', 119.0, 11.0, 'chris 13', 'Member'),
('PRVRLVCY', 6.0, 8.0, E'\u0392\u03b1\u03b3\u03b3\u03b5\u03bb\u03b7\u03c2 \u03a0.', 'Member'),
('YCRPPCRQ', 539.0, 33.0, 'Chris Master', 'Member'),
('82VLY2V9R', 690.0, 330.0, 'LastSaram', 'Elder'),
('2VQJPJCLL', 247.0, 95.0, 'Mpak_Aliar', 'Member'),
('2P82UUYGG', 833.0, 78.0, 'Kiriakos Vins', 'Co-Leader'),
('2JGGY989R', 480.0, 183.0, 'Hellspawn', 'Member'),
('222LLPCL9', 636.0, 45.0, 'thanosGr', 'Elder'),
('8P0J88CQP', 12.0, 16.0, 'ntiana', 'Member'),
('8Y29YPPQC', 60.0, 0.0, '_t_a_s_o_s_', 'Member'),
('YLCL0V8G', 22.0, 0.0, 'thanos', 'Member'),
('9QRRUGJY', 6.0, 0.0, '$tratos', 'Member'),
('JVU90RPY', 105.0, 6.0, 'Lazaros', 'Member'),
('QQV9L00Y', 394.0, 54.0, 'kots13', 'Leader'),
('JU0GY2Y0', 476.0, 13.0, 'Skull Crasher', 'Member'),
('8LUCLJ298', 312.0, 16.0, 'yatagarasu', 'Member'),
('Y2VYVRR0', 197.0, 5.0, 'Siou_10', 'Member'),
('YP0VPJP8', 1138.0, 88.0, 'tasos21', 'Elder'),
('Y089RV8R', 24.0, 0.0, 'AggelosZ', 'Member'),
('QULVR02C', 607.0, 56.0, 'theodore', 'Member'),
('LUCQPYY', 34.0, 7.0, 'Mike Kampa 2', 'Elder'),
('20VQP2Y0Y', 150.0, 12.0, 'panayiotis', 'Member'),
('GPCGPP0G', 100.0, 5.0, 'gtac.r.1', 'Member'),
('2PC2PLCRG', 138.0, 65.0, 'paris z', 'Elder'),
('PJ9VYC9G', 946.0, 33.0, 'manoskiller', 'Member'),
('80J2Q2UQC', 187.0, 15.0, '#JIM#', 'Member');

INSERT INTO PLAYER_WEEKLY_STATS(ID, CARD_DONATION, CHEST_CONTRIBUTION, WEEK, PLAYERFK) VALUES
(1, 636, 45, 35, '222LLPCL9'),
(2, 34, 7, 35, 'LUCQPYY'),
(3, 394, 54, 35, 'QQV9L00Y'),
(4, 138, 65, 35, '2PC2PLCRG'),
(5, 833, 78, 35, '2P82UUYGG'),
(6, 0, 0, 35, '2L9QC022'),
(7, 22, 0, 35, 'YLCL0V8G'),
(8, 116, 24, 35, 'UY9UR2Y2'),
(9, 197, 5, 35, 'Y2VYVRR0'),
(10, 312, 16, 35, '8LUCLJ298'),
(11, 0, 0, 35, '8CG02J0J'),
(12, 607, 56, 35, 'QULVR02C'),
(13, 302, 2, 35, 'VVQLYP2C'),
(14, 0, 0, 35, '8UVR0CV0'),
(15, 539, 33, 35, 'YCRPPCRQ'),
(16, 334, 45, 35, 'JPRJ92CJ'),
(17, 226, 26, 35, '2YY8RGLC9'),
(18, 150, 12, 35, '20VQP2Y0Y'),
(19, 476, 13, 35, 'JU0GY2Y0'),
(20, 249, 31, 35, '2GVCRLP9R'),
(21, 100, 5, 35, 'GPCGPP0G'),
(22, 633, 110, 35, 'V2R8U89U'),
(23, 1138, 88, 35, 'YP0VPJP8'),
(24, 42, 0, 35, 'G99VPYPQ'),
(25, 105, 6, 35, 'JVU90RPY'),
(26, 72, 0, 35, '2LCL0LQC'),
(27, 6, 0, 35, '9QRRUGJY'),
(28, 24, 0, 35, 'Y089RV8R'),
(29, 307, 45, 35, 'RG99QUCV'),
(30, 946, 33, 35, 'PJ9VYC9G'),
(31, 187, 15, 35, '80J2Q2UQC'),
(32, 321, 23, 35, '228RJJVQ0'),
(33, 340, 18, 35, '2QP09PJ'),
(34, 690, 330, 35, '82VLY2V9R'),
(35, 480, 183, 35, '2JGGY989R'),
(36, 0, 0, 35, '2J29LCGVL'),
(37, 6, 8, 35, 'PRVRLVCY'),
(38, 0, 0, 35, '2CGR8JUP0'),
(39, 0, 0, 35, '2CPLV9JUG'),
(40, 0, 0, 35, '8YGJU98QP'),
(41, 146, 0, 35, 'U8Y0GPGY'),
(42, 119, 11, 35, '29JYRL8LR'),
(43, 247, 95, 35, '2VQJPJCLL'),
(44, 56, 8, 35, 'RGQUR2JU'),
(45, 4, 16, 35, '2Y8LYVLUQ'),
(46, 16, 0, 35, '2RCL000UV'),
(47, 60, 0, 35, '8Y29YPPQC'),
(48, 12, 16, 35, '8P0J88CQP'),
(49, 48, 39, 35, '8PY0RJR8G'),
(50, 80, 40, 35, '8YP8CLY2C');
*/